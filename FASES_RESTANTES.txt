FASE 4: OPTIMIZACI√ìN PERFORMANCE PARA INDEXEDDB Y SISTEMA DE LISTAS
claude-code "FASE 4: Optimizaci√≥n de performance para sistema de votaci√≥n por listas con IndexedDB y datos reales.

CONTEXTO ACTUAL DEL PROYECTO:
- Sistema 100% funcional con IndexedDB local
- Votaci√≥n por listas electorales (no por dignidades individuales)
- 1000+ estudiantes reales importados
- Reportes PDF profesionales implementados
- C√≥digos de activaci√≥n din√°micos funcionando
- AdminDashboard, TutorPanel, VotingInterface operativos

OPTIMIZACIONES ESPEC√çFICAS REQUERIDAS:

1. INDEXEDDB PERFORMANCE OPTIMIZATION:
   - Optimizar √≠ndices en database-indexeddb.js para consultas frecuentes
   - Implementar caching inteligente para listas electorales
   - Bulk operations optimizadas para operaciones masivas
   - Connection pooling para operaciones concurrentes
   - Compactaci√≥n autom√°tica programada de IndexedDB
   - Query optimization con explain y profiling

2. STUDENT LIST VIRTUALIZATION:
   - Implementar react-window en StudentManager.jsx para 1000+ estudiantes
   - Virtualizaci√≥n en TutorPanel para listas grandes de estudiantes
   - Lazy loading de datos no cr√≠ticos en vistas masivas
   - Paginaci√≥n inteligente con prefetch en AdminDashboard
   - Scroll optimization para listas grandes

3. SEARCH OPTIMIZATION:
   - Optimizar b√∫squeda en tiempo real en StudentManager
   - Implementar debounce optimizado (200ms) en campos de b√∫squeda
   - Full-text search indexing para nombres y c√©dulas
   - Cache de resultados de b√∫squeda frecuentes
   - Filtros en memoria para datasets activos

4. VOTING INTERFACE OPTIMIZATION:
   - Optimizar VotingInterface.jsx para carga r√°pida de listas electorales
   - Preload de fotos de candidatos presidenciales
   - Estados optimistas para votaci√≥n fluida
   - Cach√© de ElectoralListCard components
   - Optimizaci√≥n de re-renders en contextos

5. PDF GENERATION PERFORMANCE:
   - Optimizar pdfGenerator.js para reportes grandes
   - Background generation con Web Workers
   - Streaming generation para reportes masivos
   - Compression autom√°tica de PDFs grandes
   - Progress tracking granular para UX

6. CONTEXT OPTIMIZATION:
   - Splitear contextos grandes para evitar re-renders globales
   - Implementar React.memo en componentes costosos
   - useMemo y useCallback en CandidatesContext y StudentsContext
   - Optimizar AuthContext para sesiones largas
   - Context caching para datos est√°ticos

M√âTRICAS DE PERFORMANCE TARGETS:
- Carga inicial de listas electorales: < 300ms
- B√∫squeda de estudiante en 1000+: < 150ms
- Votaci√≥n completa por lista: < 30 segundos
- Generaci√≥n reporte PDF: < 8 segundos
- Actualizaci√≥n status estudiante: < 50ms
- Memoria utilizada: < 100MB

MONITORING Y PROFILING:
- Implementar performanceMonitor.js espec√≠fico para IndexedDB
- Core Web Vitals tracking en producci√≥n
- Custom metrics para operaciones de votaci√≥n
- Memory leak detection
- Database query performance tracking

ARCHIVOS A OPTIMIZAR:
- src/services/database-indexeddb.js (√≠ndices y caching)
- src/components/admin/StudentManager.jsx (virtualizaci√≥n)
- src/components/tutor/TutorPanel.jsx (performance)
- src/components/voting/VotingInterface.jsx (optimizaci√≥n)
- src/contexts/ (todos los contexts - memo/callback)
- src/utils/performanceMonitor.js (nuevo)

TESTING DE PERFORMANCE:
- Stress test con 1000+ estudiantes reales
- Performance testing en dispositivos gama baja
- IndexedDB performance profiling
- Memory usage monitoring continuo

ENTREGABLES:
- Sistema optimizado para 1000+ estudiantes sin lag
- M√©tricas de performance implementadas y monitoring
- Tests de estr√©s pasando satisfactoriamente
- IndexedDB queries optimizadas
- UI responsive bajo carga pesada"

FASE 5: MODO QUIOSCO Y SEGURIDAD PARA VOTACI√ìN POR LISTAS
claude-code "FASE 5: Modo quiosco avanzado y seguridad electoral para sistema de votaci√≥n por listas.

CONTEXTO DEL SISTEMA ACTUAL:
- Votaci√≥n por listas electorales completas funcionando
- IndexedDB con datos reales de 1000+ estudiantes
- TutorPanel con supervisi√≥n de votaci√≥n
- VotingInterface con ElectoralListCard
- Sistema optimizado para performance

IMPLEMENTAR SEGURIDAD ELECTORAL COMPLETA:

1. ADVANCED KIOSK MODE (src/components/tutor/AdvancedKioskMode.jsx):
   - Modo pantalla completa inescapable para VotingInterface
   - Bloqueo de todas las teclas del sistema y navegaci√≥n
   - Deshabilitaci√≥n de developer tools y right-click
   - Timeout autom√°tico con countdown visible (5 minutos)
   - Overlay de bloqueo ante intentos de escape
   - Integration seamless con TutorPanel existente

2. ELECTORAL LIST VOTING SECURITY:
   - Encriptaci√≥n AES-256 espec√≠fica para votos por listas
   - Hash SHA-256 de integridad para cada voto de lista
   - Timestamp inmutable con firma digital
   - Prevenci√≥n de manipulaci√≥n DOM en ElectoralListCard
   - Validaci√≥n de integridad de fotos de candidatos
   - Log de seguridad para votaci√≥n por listas

3. SECURE SESSION MANAGEMENT:
   - Integrar con AuthContext existente para sesiones seguras
   - Auto-logout por inactividad en TutorPanel
   - Bloqueo inmediato post-voto con limpieza autom√°tica
   - Reinicio seguro para siguiente votante
   - Control de una sola sesi√≥n activa por dispositivo
   - Heartbeat de sesi√≥n con IndexedDB

4. GUIDED ELECTORAL LIST VOTING:
   - Wizard paso a paso adaptado a votaci√≥n por listas
   - Instrucciones claras para selecci√≥n de lista electoral
   - Text-to-speech para instrucciones de votaci√≥n
   - Confirmaci√≥n m√∫ltiple antes de voto final por lista
   - Timer visible y progress indicator
   - Accesibilidad WCAG 2.1 AA para votaci√≥n

5. EMERGENCY CONTROLS INTEGRATION:
   - Panel de emergencia integrado en AdminDashboard
   - Desbloqueo remoto de dispositivos desde admin
   - Backup de emergencia de votos por listas
   - Reset de dispositivo con preservaci√≥n de datos cr√≠ticos
   - Comunicaci√≥n entre dispositivos via IndexedDB sync
   - Logs de emergencia exportables

6. AUDIT SYSTEM FOR LIST VOTING:
   - Log inmutable espec√≠fico para votos por listas electorales
   - Tracking de interacciones con ElectoralListCard
   - Timestamps con precisi√≥n para cada acci√≥n de votaci√≥n
   - Device fingerprinting y session tracking
   - Detecci√≥n de anomal√≠as en patrones de votaci√≥n
   - Exportaci√≥n de auditor√≠a en reportes PDF existentes

INTEGRATION CON SISTEMA ACTUAL:

1. TUTOR PANEL SECURITY:
   - Integrar modo quiosco en TutorPanel existente
   - Bot√≥n de activaci√≥n de modo seguro
   - Monitoring de sesiones de votaci√≥n
   - Control de dispositivos desde interfaz de tutor

2. VOTING INTERFACE HARDENING:
   - Fortalecer VotingInterface.jsx con controles de seguridad
   - Validaci√≥n de ElectoralListCard antes de votaci√≥n
   - Prevenci√≥n de doble-clic y votaci√≥n m√∫ltiple
   - Integraci√≥n con sistema de confirmaci√≥n existente

3. ADMIN DASHBOARD MONITORING:
   - Agregar tab de seguridad en AdminDashboard
   - Monitoring en tiempo real de dispositivos
   - Alertas de seguridad y anomal√≠as
   - Control central de sesiones de votaci√≥n

ACCESSIBILITY Y USER EXPERIENCE:

1. INCLUSIVE VOTING EXPERIENCE:
   - Soporte completo para lectores de pantalla
   - Navegaci√≥n por teclado en ElectoralListCard
   - Contraste alto configurable para listas electorales
   - Audio instructions para selecci√≥n de listas
   - Interface adaptable culturalmente

2. EMERGENCY ACCESSIBILITY:
   - Bot√≥n de p√°nico discreto en VotingInterface
   - Asistencia autom√°tica para problemas t√©cnicos
   - Backup de voto en caso de emergencia
   - Recuperaci√≥n autom√°tica de sesi√≥n

ARCHIVOS A CREAR/MODIFICAR:
- src/components/tutor/AdvancedKioskMode.jsx (nuevo)
- src/services/votingSecurityLists.js (nuevo)
- src/hooks/useSecureVotingSession.js (nuevo)
- src/components/voting/GuidedListVoting.jsx (nuevo)
- src/components/admin/SecurityPanel.jsx (nuevo)
- src/services/auditLoggerLists.js (nuevo)
- src/components/tutor/TutorPanel.jsx (modificar)
- src/components/voting/VotingInterface.jsx (modificar)
- src/components/admin/AdminDashboard.jsx (modificar)

DEPENDENCIAS DE SEGURIDAD:
- crypto-js (encriptaci√≥n)
- ua-parser-js (device detection)
- speech-synthesis (text-to-speech)

ENTREGABLES:
- Modo quiosco inescapable para votaci√≥n por listas
- Seguridad electoral espec√≠fica para sistema de listas
- Auditor√≠a completa integrada con reportes PDF
- Accesibilidad WCAG 2.1 AA compliant
- Sistema de emergencia integrado con AdminDashboard
- Documentaci√≥n de seguridad para votaci√≥n por listas"
‚ÄÉ
FASE 6: DOCKER + COUCHDB + POUCHDB PARA SINCRONIZACI√ìN EN PRODUCCI√ìN
claude-code "FASE 6: Implementar Docker + CouchDB + PouchDB para sincronizaci√≥n multi-dispositivo en producci√≥n.

CONTEXTO DEL SISTEMA ACTUAL:
- Sistema completo funcionando con IndexedDB local
- 1000+ estudiantes, votaci√≥n por listas, reportes PDF
- Modo quiosco y seguridad implementados
- Listo para escalado a m√∫ltiples dispositivos

OBJETIVO: Migrar de IndexedDB local a sistema h√≠brido PouchDB + CouchDB con sincronizaci√≥n autom√°tica.

IMPLEMENTAR INFRAESTRUCTURA DE PRODUCCI√ìN:

1. DOCKER SETUP COMPLETO:
   - docker-compose.yml con CouchDB 3.3+ optimizado
   - Dockerfile multi-stage para React app optimizada
   - nginx reverse proxy para PWA
   - SSL/TLS certificates con Let's Encrypt
   - Health checks y restart policies
   - Volume persistence para datos cr√≠ticos

2. COUCHDB CONFIGURATION:
   - Configuraci√≥n optimizada para votaciones electorales
   - Databases: students, candidates, votes, sessions, activation_codes
   - User authentication y roles espec√≠ficos
   - Replication settings para sincronizaci√≥n
   - Backup autom√°tico programado
   - Performance tuning para carga alta

3. POUCHDB INTEGRATION SERVICE:
   - Nuevo servicio: src/services/database-pouch.js
   - Wrapper que mantiene compatibilidad con database-indexeddb.js
   - Sincronizaci√≥n bidireccional autom√°tica
   - Conflict resolution para votaci√≥n por listas
   - Offline-first con fallback a IndexedDB
   - Connection monitoring y auto-retry

4. MIGRATION SYSTEM:
   - Migraci√≥n autom√°tica de IndexedDB a PouchDB
   - Preservaci√≥n de todos los datos existentes
   - Validaci√≥n de integridad post-migraci√≥n
   - Rollback autom√°tico en caso de error
   - Progress tracking durante migraci√≥n
   - Backup completo antes de migraci√≥n

5. SYNC MANAGEMENT:
   - Servicio de sincronizaci√≥n: src/services/syncManager.js
   - Sync status en tiempo real en ConnectionStatus.jsx
   - Sincronizaci√≥n inteligente por prioridad de datos
   - Batch sync para optimizar performance
   - Conflict resolution autom√°tica
   - Manual sync trigger desde AdminDashboard

6. MULTI-DEVICE COORDINATION:
   - Device registration y tracking
   - Real-time updates entre dispositivos
   - Vote synchronization inmediata
   - Session coordination entre tutores
   - Central monitoring desde AdminDashboard
   - Device health monitoring

CONFIGURACI√ìN DE PRODUCCI√ìN:

1. ENVIRONMENT SETUP:
   - .env.production con configuraciones CouchDB
   - Docker secrets para credenciales
   - SSL configuration para HTTPS
   - CORS configuration para PWA
   - Backup scripts automatizados

2. PERFORMANCE OPTIMIZATION:
   - CouchDB √≠ndices optimizados para consultas frecuentes
   - Connection pooling y keep-alive
   - Gzip compression para sync data
   - Lazy sync para datos no cr√≠ticos
   - Memory optimization para contenedores

3. BACKUP Y RECOVERY:
   - Backup autom√°tico cada hora durante votaci√≥n
   - Full backup diario fuera de horarios electorales
   - Recovery procedures documentados
   - Data verification post-backup
   - Disaster recovery plan

INTEGRATION CON SISTEMA ACTUAL:

1. DATABASE SERVICE ABSTRACTION:
   - Mantener interfaz de database-indexeddb.js
   - Factory pattern para elegir IndexedDB vs PouchDB
   - Configuraci√≥n via environment variable
   - Fallback autom√°tico a IndexedDB si CouchDB no disponible

2. CONTEXT ADAPTATION:
   - Modificar contexts para soportar sync status
   - Real-time updates desde otros dispositivos
   - Conflict resolution UI para datos duplicados
   - Loading states durante sincronizaci√≥n

3. ADMIN DASHBOARD ENHANCEMENT:
   - Nuevo tab "üîÑ Sincronizaci√≥n" en AdminDashboard
   - Monitor de dispositivos conectados
   - Sync status y estad√≠sticas
   - Manual sync controls
   - Device management y reset

DESARROLLO Y TESTING:

1. DEVELOPMENT ENVIRONMENT:
   - Docker compose para desarrollo local
   - Hot reload manteniendo sync functionality
   - Mock CouchDB para testing offline
   - Sync simulation tools

2. PRODUCTION TESTING:
   - Multi-device stress testing
   - Network failure simulation
   - Sync conflict testing
   - Performance benchmarking
   - Security penetration testing

ARCHIVOS A CREAR:
- docker-compose.yml
- docker-compose.prod.yml
- Dockerfile
- nginx.conf
- src/services/database-pouch.js
- src/services/syncManager.js
- src/services/migrationService.js
- src/components/admin/SyncDashboard.jsx
- src/hooks/useSyncStatus.js
- scripts/backup.sh
- scripts/restore.sh

MODIFICAR:
- src/services/database-indexeddb.js (factory pattern)
- src/components/common/ConnectionStatus.jsx (sync status)
- src/components/admin/AdminDashboard.jsx (sync tab)
- src/contexts/ (sync integration)

DEPENDENCIAS:
- pouchdb
- pouchdb-find
- pouchdb-authentication

ENTREGABLES:
- Sistema h√≠brido IndexedDB + PouchDB + CouchDB
- Sincronizaci√≥n multi-dispositivo autom√°tica
- Docker setup completo para producci√≥n
- Migraci√≥n sin p√©rdida de datos
- Monitoring y administraci√≥n centralizada
- Backup y recovery automatizado
- Documentaci√≥n completa de deployment"
‚ÄÉ
FASE 7: TESTING INTEGRAL Y DEPLOYMENT FINAL
claude-code "FASE 7: Testing integral, optimizaci√≥n final y deployment para producci√≥n electoral.

CONTEXTO DEL SISTEMA FINAL:
- Sistema completo con PouchDB + CouchDB + Docker
- Votaci√≥n por listas con 1000+ estudiantes
- Modo quiosco y seguridad implementados
- Sincronizaci√≥n multi-dispositivo funcionando
- Reportes PDF profesionales

IMPLEMENTAR TESTING COMPLETO:

1. AUTOMATED TESTING SUITE:
   - Unit tests para servicios cr√≠ticos (database, voting, auth)
   - Integration tests para flujos completos de votaci√≥n
   - E2E testing con Playwright para user journeys
   - Performance testing con 1000+ estudiantes simulados
   - Security testing para modo quiosco y votaci√≥n
   - Sync testing para multi-device scenarios

2. ELECTORAL SIMULATION TESTING:
   - Simulaci√≥n completa de elecci√≥n con datos reales
   - Stress testing con m√∫ltiples tutores simult√°neos
   - Network failure simulation y recovery
   - Device failure scenarios y backup procedures
   - Peak load testing durante horarios de votaci√≥n
   - Conflict resolution testing para sync

3. PRODUCTION READINESS CHECKLIST:
   - Security audit completo del sistema
   - Performance benchmarking final
   - Accessibility compliance verification (WCAG 2.1 AA)
   - Browser compatibility testing (Chrome, Firefox, Safari, Edge)
   - Mobile device testing (tablets, smartphones)
   - Offline functionality comprehensive testing

4. DOCUMENTATION COMPLETION:
   - User manuals para Admin, Tutor, y soporte t√©cnico
   - Installation guide paso a paso
   - Troubleshooting guide completo
   - Security protocols y procedures
   - Emergency procedures documentation
   - API documentation completa

5. MONITORING Y LOGGING:
   - Production monitoring con m√©tricas clave
   - Error tracking y alerting system
   - Performance monitoring continuo
   - Security incident logging
   - Audit trail completo para compliance
   - Real-time dashboard para d√≠a de elecci√≥n

DEPLOYMENT OPTIMIZATION:

1. PRODUCTION BUILD OPTIMIZATION:
   - Code splitting optimizado para carga r√°pida
   - Bundle analysis y tree shaking
   - Asset optimization (images, fonts, icons)
   - Service worker optimization para PWA
   - CDN configuration para assets est√°ticos
   - Cache strategies para mejor performance

2. INFRASTRUCTURE SCALING:
   - Container scaling strategies
   - Load balancing configuration
   - Database connection optimization
   - Memory y CPU optimization
   - Network optimization para sync
   - Backup strategies refinadas

3. SECURITY HARDENING:
   - SSL/TLS configuration review
   - Security headers implementation
   - Input validation comprehensive review
   - XSS y CSRF protection verification
   - Rate limiting implementation
   - Access control final review

FINAL VALIDATION:

1. ELECTORAL AUTHORITY COMPLIANCE:
   - Audit trail compliance verification
   - Vote secrecy compliance
   - Transparency requirements validation
   - Legal requirements checklist
   - Accessibility laws compliance
   - Data protection regulations compliance

2. INSTITUTIONAL TESTING:
   - Pilot testing con grupo peque√±o
   - Tutor training y feedback incorporation
   - Admin training y documentation refinement
   - Student experience testing y optimization
   - Technical support procedures validation
   - Emergency protocols testing

ARCHIVOS A CREAR:
- tests/ (estructura completa de testing)
- docs/ (documentaci√≥n completa)
- scripts/deployment/ (scripts de deployment)
- monitoring/ (configuraci√≥n de monitoring)
- security/ (security configurations)

ENTREGABLES FINALES:
- Sistema 100% listo para producci√≥n electoral
- Testing suite completo y passing
- Documentaci√≥n completa para operaci√≥n
- Monitoring y alerting configurado
- Security hardening completado
- Compliance verification completa
- Training materials para usuarios finales
- Emergency procedures documentadas
- Performance benchmarks validados
- Deployment automation completo"
